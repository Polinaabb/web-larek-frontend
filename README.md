# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/styles/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## В данном проекте используется MVP(Model View Presenter) архитектура 

## Описание данных
1. Интерфейс IWebItem описывает типы свойств одного товара, IWebItem[] - каталог товаров

2. Интерфейс IOrder описывает ответ сервера на успешный заказ

3. Интерфейс IOrderResult описывает тело запроса на сервер с заказом

4. Интерфейс IAppState данные кталога, корзины и заказа

## Модели данных
Слой PRESENTER: служит для взаимодействия с данными с сервера

1. Класс EventEmitter 
Обеспечивает работу событий. Его функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события.
Класс имеет методы on, off, emit - для подписки на событие, отписки от события и уведомления подписчиков о наступлении события соответственно.
Также реализованы методы onAll, offAll ждя подписки на все события и сюроса всех подписчиков
 trigger 
2. Класс Api
Базовый класс, который осуществляет работу с сервером, отправляет запросы методами get и post для получаения и отправки данных соответсвенно
3. Класс LarekAPI 
Обеспечивает работу с конкретными данными с сервера
Метод getWebList получает массив всех товаров
Метод getWebItem получает один конкретный товар
Метод orderWeb отправляет заказ на сервер

Слой MODEL: служит для взаимодействия между сервером и интерфейсом

1. Класс Model
Абстрактный базовый класс обеспечивает создание объекта для хранения данных 
2. Класс WebItem
Содержит только свойства товара
3. Класс AppState
Метод throwInBasket добавляет товар в корзину
Метод removeInBasket удаляет товар из корзины
Метод clearOrder очищает заказ
Метод clearBasket очищает корзину
Метод getTotal общая сумма заказа в корзине
Метод setCatalog передает в модель данных массив товаров, запускает событие изменения каталога товаров в модели данных
Метод checkContentBasket возвращает содержимое корзины
Метод checkBasket проверяет находится ли товар в корзине
Метод setOrder передает данные из корзины в заказ
Метод setPayment передает данные о способе оплаты в заказ
Метод setAddress передает данные адреса в заказ
Метод setEmail передает email в заказ
Метод setPhone передает номер телефона в заказ
Метод validateOrder валидация модального окна со способом оплаты и адресом
Метод validateOrderForm валидация формы заказа

Слой VIEW: данный слой служит для отображения интерфейса

1. Класс Component
Абстрактный  базовый класс компонента
Метод addClass добавляет класс
Метод setText устанавливает текстовое содержимое
Метод setDisabled сменяет статус блокировки
Метод setHidden скрывает элемент
Метод setVisible показывает элемент
Метод setImage устанавливает изображение с альтернативным текстом
2. Класс Card служит для отрисовки товара на странице
Метод set title присваивает текстовое содержимое элементу названия карточки
Метод set description присваивает текстовое содержимое элементу описания карточки
Метод set image устанавливает изображение карточки
Метод set price устанавливает цену товара в карточке, при этом если значение цены = null, метод блокирует кнопку 'купить'
Метод set category присваивает категорию товара в карточке и добавляет нужный класс категории
3. Класс CardBasket служит для отрисовки товара в корзине
Метод set title устанавливает название товара
Метод set index устанавливает нумерацию товара в корзине
Метод set price устанавливает стоимость товара
4. Класс Basket отрисовывает элементы в корзине
5. Класс Page отрисовывает главную страницу
Метод set counter устанавливает число, показывающее сколько товаров в корзине
Метод set catalog передает в каталог массив карточек
Метод set locked присваивает класс блокировки страницы для прокрутки, при открытии модального окна
6. Класс Modal служит для отрисовки модальных окон
Метод set content устанавливает содержмое модального окна
Метод open служит для открытия модального окна по клику
Метод close служит для закрытия модального окна по клику
Метод render вызывает родительский render, добавляет модальное окно на страницу, вызывает событие ее открытия 
7. Класс Form служит для отрисовки валидации
Метод set valid деактивирует кнопку сабмита
Метод set errors добавляет текст ошибки
8. Класс Order служит для отрисовки формы с адресом и способом оплаты
Метод setClass служит для добавления и удаления актовного класса кнопки
Метод set address устанавливает содержимое строки с адресом
9. Класс Contacts отрисовывает форму с контактами пользователя
Метод set phone устанавливает содержимое строки с телефоном
Метод set email устанавливает содержимое строки с email
10. Класс Success показывает окно об успешном заказе